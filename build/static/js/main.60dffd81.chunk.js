(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(58),l=n.n(u),o=n(11),i=n.n(o),c=n(25),s=n(67),p=n(59),m=n(60),z=n(66),d=n(61),f=n(68),h=n(26),v=n(27),g=n.n(v),w=n(28),E=n.n(w),b=Object(h.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(g.a),S=function(e){var t=e.pizza;return r.a.createElement(E.a,null,r.a.createElement(b,{component:"th",scope:"row"},t.content))},P=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},j=n(12),y=n.n(j),C={getAll:function(){return y.a.get("/api/pizzat").then(function(e){return e.data})},create:function(e){return y.a.post("/api/pizzat",e).then(function(e){return e.data})},update:function(e,t){return y.a.put("".concat("/api/pizzat","/").concat(e),t).then(function(e){return e.data})}},k=n(64),O=n.n(k),x=n(65),K=n.n(x),T=n(63),D=n.n(T),I={login:function(){var e=Object(c.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},A=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(z.a)(this,Object(d.a)(t).call(this))).addPizza=function(t){t.preventDefault();var n={content:e.state.newPizza,date:new Date};C.create(n).then(function(t){e.setState({pizzat:e.state.pizzat.concat(t),newPizza:""})})},e.toggleImportanceOf=function(t){return function(){var n=e.state.pizzat.find(function(e){return e.id===t}),a=Object(s.a)({},n);C.update(t,a).then(function(n){e.setState({pizzat:e.state.pizzat.map(function(e){return e.id!==t?e:n})})}).catch(function(a){e.setState({error:"pizza '".concat(n.content,"' on jo valitettavasti poistettu palvelimelta"),pizzat:e.state.pizzat.filter(function(e){return e.id!==t})}),setTimeout(function(){e.setState({error:null})},5e4)})}},e.handlePizzaChange=function(t){e.setState({newPizza:t.target.value})},e.login=function(t){t.preventDefault(),console.log("Kirjautunut sis\xe4\xe4n tunnukselle",e.state.username,e.state.password)},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.handleUsernameChange=function(t){e.setState({username:t.target.value})},e.login=function(){var t=Object(c.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,I.login({username:e.state.username,password:e.state.password});case 4:a=t.sent,e.setState({username:"",password:"",user:a}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:"Kirjautuminen ep\xe4onnistui"}),setTimeout(function(){e.setState({error:null})},5e3);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e){return t.apply(this,arguments)}}(),e.state={pizzat:[],newPizza:"",error:null,username:"",password:"",user:null},e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this;C.getAll().then(function(t){e.setState({pizzat:t})})}},{key:"render",value:function(){var e=this,t=this.state.pizzat,n=Object(h.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(g.a);return r.a.createElement("div",null,r.a.createElement("h1",null,"Pizzeria"),r.a.createElement(P,{message:this.state.error}),null===this.state.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Kirjaudu"),r.a.createElement("form",{onSubmit:e.login},r.a.createElement("div",null,"K\xe4ytt\xe4j\xe4tunnus:",r.a.createElement("input",{type:"text",value:e.state.username,onChange:e.handleUsernameChange})),r.a.createElement("div",null,"Salasana:",r.a.createElement("input",{type:"password",value:e.state.password,onChange:e.handlePasswordChange})),r.a.createElement("button",null,"Kirjaudu sis\xe4\xe4n"))):r.a.createElement("div",null,r.a.createElement("p",null,"Tervetuloa ",this.state.user.name),r.a.createElement("div",null,r.a.createElement("h2",null,"Luo uusi Pizza"),r.a.createElement("form",{onSubmit:e.addPizza},r.a.createElement("input",{value:e.state.newPizza,onChange:e.handlePizzaChange}),r.a.createElement("button",null,"Tallenna")))),r.a.createElement(D.a,null,r.a.createElement(O.a,null,r.a.createElement(K.a,null,r.a.createElement(E.a,null,r.a.createElement(n,null,"Pizzat"))),r.a.createElement("ul",null,t.map(function(t){return r.a.createElement(S,{key:t.id,pizza:t,toggleImportance:e.toggleImportanceOf(t.id)})})))),r.a.createElement("form",{onSubmit:this.addPizza},r.a.createElement("input",{value:this.state.newPizza,onChange:this.handlePizzaChange}),r.a.createElement("button",{type:"submit"},"Tallenna")))}}]),t}(a.Component);n(169);console.log("hello world"),l.a.render(r.a.createElement(A,null),document.getElementById("root"))},69:function(e,t,n){e.exports=n(171)}},[[69,2,1]]]);
//# sourceMappingURL=main.60dffd81.chunk.js.map